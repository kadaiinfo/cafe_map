/* ========================================
   MapView コンポーネント全体のレイアウト
   ======================================== */

/* メインレイアウトコンテナ - 地図とUI要素の基底 */
.map-layout {
  position: relative;     /* 子要素の絶対配置の基準点 */
  width: 100vw;          /* ビューポート幅いっぱい */
  height: 100vh;         /* ビューポート高さいっぱい */
}

/* 地図本体のコンテナ - MapLibre GLが描画される領域 */
.map-container {
  width: 100vw;          /* ビューポート幅いっぱい */
  height: 100vh;         /* ビューポート高さいっぱい */
}

/* ========================================
   ポップアップ（マーカークリック時の吹き出し）
   ======================================== */

/* MapLibre GLデフォルトのポップアップ内容をカスタマイズ */
.maplibregl-popup-content {
  background: white;                           /* 背景色：白 */
  border: 1.5px solid black !important;      /* 枠線：黒、太さ1.5px */
  border-radius: 4px;                         /* 角丸：4px */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); /* 影：下方向に薄いグレー */
}

/* カスタムポップアップ（.custom-popup クラス）のスタイル */
.custom-popup .maplibregl-popup-content {
  background: white !important;                        /* 背景色：白（強制適用） */
  border: none !important;                            /* 枠線：なし */
  border-radius: 6px !important;                     /* 角丸：6px */
  box-shadow: none !important;                       /* 影：なし */
  padding: 8px 12px !important;                      /* 内側余白：上下8px、左右12px */
  font-family: "Noto Sans JP", sans-serif !important; /* フォント：日本語対応 */
  font-size: 14px !important;                        /* 文字サイズ：14px */
  font-weight: 600 !important;                       /* 文字太さ：やや太め */
  color: #333 !important;                            /* 文字色：ダークグレー */
  z-index: 9999 !important;                          /* 重ね順：最前面 */
}

/* カスタムポップアップの三角形（吹き出しの矢印部分） */
.custom-popup .maplibregl-popup-tip {
  border-top-color: white !important;               /* 三角形の色：白 */
}

/* ========================================
   ズーム警告（ズームレベルが低すぎる時の警告表示）
   ======================================== */

/* ズーム警告のメインコンテナ */
.zoom-warning {
  position: absolute;                              /* 絶対配置 */
  top: 50%;                                       /* 画面縦中央 */
  left: 50%;                                      /* 画面横中央 */
  transform: translate(-50%, -50%);               /* 要素自体の中央を基準点に調整 */
  background: rgba(255, 255, 255, 0.95);         /* 背景色：半透明の白（透明度95%） */
  border: 2px solid #ff6b6b;                     /* 枠線：赤色、太さ2px */
  border-radius: 8px;                            /* 角丸：8px */
  padding: 20px;                                 /* 内側余白：20px */
  text-align: center;                            /* 文字配置：中央揃え */
  z-index: 1000;                                 /* 重ね順：地図より上 */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);   /* 影：下方向に薄いグレー */
}

/* ズーム警告のメインテキスト */
.zoom-warning p {
  margin: 0 0 8px 0;     /* マージン：下のみ8px */
  color: #d63031;        /* 文字色：赤 */
  font-weight: 600;      /* 文字太さ：やや太め */
  font-size: 16px;       /* 文字サイズ：16px */
}

/* ズーム警告のサブテキスト（現在は使用されていない可能性） */
.zoom-warning small {
  color: #636e72;        /* 文字色：グレー */
  font-size: 14px;       /* 文字サイズ：14px */
}

/* ========================================
   クラスターマーカー（ズームアウト時のグループ表示）
   ======================================== */

/* クラスターマーカーの基本スタイル */
.cluster-marker {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  border-radius: 50% !important;
  border: 3px solid white !important;
  color: white !important;
  font-weight: bold !important;
  cursor: pointer !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3) !important;
  transition: transform 0.2s ease !important;
  font-family: "Noto Sans JP", sans-serif !important;
}


/* クラスターマーカー（茶色で統一） */
.cluster-marker {
  background-color: #70513C !important;
}

/* ========================================
   現在地マーカー（ユーザーの位置表示）
   ======================================== */

/* 現在地マーカーのコンテナ */
.user-location-marker {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
}

/* 現在地の精度を表す外側の円 */
.user-location-accuracy {
  position: absolute;
  width: 40px;
  height: 40px;
  background-color: rgba(66, 133, 244, 0.2);
  border: 2px solid rgba(66, 133, 244, 0.5);
  border-radius: 50%;
  animation: pulse-accuracy 2s infinite;
}

/* 現在地を表す内側の点 */
.user-location-dot {
  width: 16px;
  height: 16px;
  background-color: #4285f4;
  border: 3px solid white;
  border-radius: 50%;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  z-index: 1;
  position: relative;
}

/* 現在地マーカーのパルスアニメーション */
@keyframes pulse-accuracy {
  0% {
    transform: scale(1);
    opacity: 0.7;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.4;
  }
  100% {
    transform: scale(1);
    opacity: 0.7;
  }
}

/* 現在地ボタン */
.location-button {
  position: absolute;
  bottom: 120px;
  right: 20px;
  width: 50px;
  height: 50px;
  background-color: white;
  border: none;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  z-index: 1000;
  transition: background-color 0.2s, transform 0.1s;
}

.location-button:hover {
  background-color: #f5f5f5;
  transform: scale(1.05);
}

.location-button:active {
  transform: scale(0.95);
}

.location-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.location-button.loading {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ========================================
   レスポンシブ対応（768px以下の画面）
   ======================================== */

@media (max-width: 768px) {
  /* モバイル版ズーム警告 - 横幅を画面いっぱいに調整 */
  .zoom-warning {
    left: 20px;                    /* 左端から20px */
    right: 20px;                   /* 右端から20px */
    transform: translateY(-50%);   /* 縦中央のみ調整（横は left/right で制御） */
    padding: 16px;                 /* 内側余白：16px（デスクトップより小さく） */
  }
  
  /* モバイル版メインテキスト - 文字サイズを小さく */
  .zoom-warning p {
    font-size: 14px;              /* 文字サイズ：14px（デスクトップより小さく） */
  }
  
  /* モバイル版サブテキスト - 文字サイズを小さく */
  .zoom-warning small {
    font-size: 12px;              /* 文字サイズ：12px（デスクトップより小さく） */
  }
}